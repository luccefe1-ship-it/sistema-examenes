
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apuntes - Plataforma Ex√°menes</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/apuntes.css">
    <style>
#backBtn {
    background: #6c757d !important;
    color: white !important;
    padding: 8px 16px !important;
    border: none !important;
    border-radius: 5px !important;
    font-size: 14px !important;
}

/* FONDOS DIN√ÅMICOS IGUAL QUE HOMEPAGE */
body {
    font-family: 'Arial', sans-serif;
    min-height: 100vh;
    transition: background 1s ease;
    /* FONDO CELESTE CLARO POR DEFECTO PARA EL D√çA */
    background: 
        radial-gradient(ellipse at top, rgba(135,206,250,0.3) 0%, rgba(173,216,230,0.4) 50%, rgba(176,196,222,0.5) 100%),
        radial-gradient(circle at 20% 80%, rgba(200,230,255,0.15) 0%, transparent 60%),
        radial-gradient(circle at 80% 20%, rgba(200,230,255,0.15) 0%, transparent 60%),
        radial-gradient(circle at 40% 40%, rgba(220,240,255,0.12) 0%, transparent 60%),
        radial-gradient(circle at 60% 70%, rgba(220,240,255,0.14) 0%, transparent 60%),
        radial-gradient(circle at 10% 10%, rgba(200,230,255,0.12) 0%, transparent 60%),
        radial-gradient(circle at 90% 90%, rgba(200,230,255,0.10) 0%, transparent 60%),
        radial-gradient(circle at 30% 20%, rgba(173,216,230,0.06) 0%, transparent 50%),
        radial-gradient(circle at 70% 80%, rgba(176,196,222,0.06) 0%, transparent 50%);
}

/* FONDO D√çA (6:00 - 18:00) - Celeste muy clarito */
body.dia {
    background: 
        radial-gradient(ellipse at top, rgba(135,206,250,0.3) 0%, rgba(173,216,230,0.4) 50%, rgba(176,196,222,0.5) 100%),
        radial-gradient(circle at 20% 80%, rgba(200,230,255,0.15) 0%, transparent 60%),
        radial-gradient(circle at 80% 20%, rgba(200,230,255,0.15) 0%, transparent 60%),
        radial-gradient(circle at 40% 40%, rgba(220,240,255,0.12) 0%, transparent 60%),
        radial-gradient(circle at 60% 70%, rgba(220,240,255,0.14) 0%, transparent 60%),
        radial-gradient(circle at 10% 10%, rgba(200,230,255,0.12) 0%, transparent 60%),
        radial-gradient(circle at 90% 90%, rgba(200,230,255,0.10) 0%, transparent 60%),
        radial-gradient(circle at 30% 20%, rgba(173,216,230,0.06) 0%, transparent 50%),
        radial-gradient(circle at 70% 80%, rgba(176,196,222,0.06) 0%, transparent 50%);
}

/* FONDO TARDE (18:00 - 21:00) - Gradiente naranja abajo izquierda a azul oscuro arriba derecha */
body.tarde {
    background: 
        linear-gradient(45deg, rgba(255,120,40,0.6) 0%, rgba(255,140,60,0.5) 20%, rgba(120,150,200,0.4) 60%, rgba(40,60,120,0.8) 100%),
        radial-gradient(circle at 20% 80%, rgba(255,200,150,0.10) 0%, transparent 60%),
        radial-gradient(circle at 80% 20%, rgba(100,120,180,0.08) 0%, transparent 60%),
        radial-gradient(circle at 40% 40%, rgba(255,150,100,0.06) 0%, transparent 60%),
        radial-gradient(circle at 60% 70%, rgba(80,100,160,0.07) 0%, transparent 60%),
        radial-gradient(circle at 10% 10%, rgba(255,140,90,0.08) 0%, transparent 60%),
        radial-gradient(circle at 90% 90%, rgba(60,80,140,0.06) 0%, transparent 60%),
        radial-gradient(circle at 30% 20%, rgba(220,140,80,0.04) 0%, transparent 50%),
        radial-gradient(circle at 70% 80%, rgba(80,100,160,0.04) 0%, transparent 50%);
}

/* FONDO NOCHE (21:00 - 6:00) - Muy oscuro */
body.noche {
    background: 
        radial-gradient(ellipse at top, rgba(25,25,60,0.8) 0%, rgba(30,30,70,0.9) 50%, rgba(15,15,40,0.95) 100%),
        radial-gradient(circle at 20% 80%, rgba(100,100,150,0.06) 0%, transparent 60%),
        radial-gradient(circle at 80% 20%, rgba(100,100,150,0.06) 0%, transparent 60%),
        radial-gradient(circle at 40% 40%, rgba(100,100,150,0.04) 0%, transparent 60%),
        radial-gradient(circle at 60% 70%, rgba(100,100,150,0.05) 0%, transparent 60%),
        radial-gradient(circle at 10% 10%, rgba(100,100,150,0.04) 0%, transparent 60%),
        radial-gradient(circle at 90% 90%, rgba(100,100,150,0.03) 0%, transparent 60%),
        radial-gradient(circle at 30% 20%, rgba(50,50,100,0.02) 0%, transparent 50%),
        radial-gradient(circle at 70% 80%, rgba(60,60,120,0.02) 0%, transparent 50%);
}
</style>
</head>
<body>
    <!-- Header principal -->
    <nav class="navbar">
        <div class="nav-content">
            <h1>Plataforma Ex√°menes de Justicia</h1>
            <div class="nav-actions">
                <span id="userName">Cargando...</span>
                <button id="backBtn">‚Üê Volver</button>
                <button id="logoutBtn">Cerrar Sesi√≥n</button>
            </div>
        </div>
    </nav>

    <!-- Contenido principal -->
    <div class="container-apuntes">
        <!-- Selector de tema superior -->
        <div class="tema-selector-container">
            <div class="tema-selector-wrapper">
                <button id="crearTemaApuntesBtn" class="btn-crear-tema">+ Crear Tema</button>
                <select id="selectorTemaApuntes" class="tema-selector">
                    <option value="">Selecciona un tema...</option>
                </select>
                <span id="temaActualApuntes" class="tema-actual-display">Ning√∫n tema seleccionado</span>
            </div>
        </div>

        <!-- Contenido principal con √≠ndice y notas -->
        <div class="main-content-apuntes" id="mainContentApuntes" style="display: none;">
            <!-- √çndice lateral -->
            <div class="indice-lateral">
                <div class="indice-header">
                    <h3>üìã √çndice</h3>
                    <button id="anadirEpigrafeBtn" class="btn-anadir-epigrafe">+ A√±adir Ep√≠grafe</button>
                </div>
                <ul id="listaEpigrafes" class="lista-epigrafes">
                    <!-- Los ep√≠grafes se cargar√°n aqu√≠ din√°micamente -->
                </ul>
            </div>

            <!-- √Årea de notas central -->
            <div class="area-notas">
                <!-- Navegaci√≥n superior -->
                <div class="navegacion-epigrafes">
                    <button id="epigrafeAnterior" class="btn-navegacion" disabled>‚óÄ Anterior</button>
                    <span id="epigrafeActual" class="epigrafe-actual-nombre">Selecciona un ep√≠grafe</span>
                    <button id="epigrafeSiguiente" class="btn-navegacion" disabled>Siguiente ‚ñ∂</button>
                </div>

                <!-- Contenido de la nota -->
                <div class="contenido-nota" id="contenidoNota">
                    <div class="nota-placeholder">
                        <p>üìù Selecciona un ep√≠grafe del √≠ndice para comenzar a tomar apuntes</p>
                    </div>
                </div>

                <div class="area-edicion" id="areaEdicion" style="display: none;">
                    <div class="editor-header">
                        <input type="text" id="tituloEpigrafeEditor" class="titulo-editor" placeholder="T√≠tulo del ep√≠grafe">
                        <div class="editor-acciones">
                            <button id="guardarNotaBtn" class="btn-guardar">üíæ Guardar</button>
                            <button id="cancelarEdicionBtn" class="btn-cancelar">‚ùå Cancelar</button>
                        </div>
                    </div>
                    <div class="toolbar-formato">
                        <button type="button" class="btn-formato" onclick="formatearTexto('bold')" title="Negrita"><b>B</b></button>
                        <button type="button" class="btn-formato" onclick="formatearTexto('underline')" title="Subrayado"><u>U</u></button>
                        <button type="button" class="btn-formato" onclick="formatearTexto('italic')" title="Cursiva"><i>I</i></button>
                        <button type="button" class="btn-formato" onclick="insertarSaltoLinea()" title="Salto de l√≠nea">‚Üµ</button>
                    </div>
                    <div id="contenidoEditor" class="contenido-editor-rico" contenteditable="true" placeholder="Escribe el contenido de tu nota aqu√≠..."></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modales -->
    <div id="modalCrearTemaApuntes" class="modal">
        <div class="modal-content">
            <h3>Crear Nuevo Tema para Apuntes</h3>
            <input type="text" id="nombreTemaApuntes" placeholder="Nombre del tema" maxlength="50">
            <textarea id="descripcionTemaApuntes" placeholder="Descripci√≥n del tema (opcional)" maxlength="200"></textarea>
            <div class="subtema-option">
                <label>
                    <input type="checkbox" id="esSubtemaApuntes"> Es un subtema
                </label>
                <select id="temaPadreSelectApuntes" style="display: none; margin-top: 10px; width: 100%; padding: 8px;">
                    <option value="">Selecciona tema padre...</option>
                </select>
            </div>
            <div class="modal-actions">
                <button id="confirmarCrearTemaApuntes" class="btn-primary">Crear</button>
                <button id="cancelarCrearTemaApuntes" class="btn-secondary">Cancelar</button>
            </div>
        </div>
    </div>

    <div id="modalAnadirEpigrafe" class="modal">
        <div class="modal-content">
            <h3>A√±adir Nuevo Ep√≠grafe</h3>
            <input type="text" id="nombreEpigrafe" placeholder="Nombre del ep√≠grafe" maxlength="100">
            <div class="modal-actions">
                <button id="confirmarAnadirEpigrafe" class="btn-primary">A√±adir</button>
                <button id="cancelarAnadirEpigrafe" class="btn-secondary">Cancelar</button>
            </div>
        </div>
    </div>

    <script type="module" src="js/apuntes.js"></script>
    <script>
    // Funci√≥n para actualizar el fondo seg√∫n la hora
    function actualizarFondoHora() {
        const ahora = new Date();
        const hora = ahora.getHours();
        const body = document.body;
        
        // Limpiar clases anteriores
        body.classList.remove('dia', 'tarde', 'noche');
        
        if (hora >= 6 && hora < 18) {
            // D√≠a (6:00 - 18:00) - Fondo claro
            body.classList.add('dia');
        } else if (hora >= 18 && hora < 21) {
            // Tarde (18:00 - 21:00) - Fondo actual
            body.classList.add('tarde');
        } else {
            // Noche (21:00 - 6:00) - Fondo oscuro
            body.classList.add('noche');
        }
    }

    // Aplicar fondo al cargar
    document.addEventListener('DOMContentLoaded', () => {
        actualizarFondoHora();
    });
    </script>
</body>
</html>
