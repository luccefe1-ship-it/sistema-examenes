<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Perfil - Plataforma Ex√°menes</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/perfil.css">
</head>
<body>
    <!-- Header -->
    <nav class="navbar">
        <div class="nav-content">
            <h1>Mi Perfil de Usuario</h1>
            <div class="nav-actions">
                <span id="userName">Cargando...</span>
                <button id="backBtn">‚Üê Volver al Inicio</button>
                <button id="logoutBtn">Cerrar Sesi√≥n</button>
            </div>
        </div>
    </nav>

    <!-- Contenido principal -->
    <div class="perfil-container">
        <div class="perfil-content">
            
            <!-- Informaci√≥n del usuario -->
            <div class="perfil-card">
                <div class="perfil-header">
                    <div class="perfil-avatar">
                        <span id="userInitials">U</span>
                    </div>
                    <div class="perfil-info">
                        <h2 id="userDisplayName">Nombre del Usuario</h2>
                        <p id="userEmail">email@ejemplo.com</p>
                        <p class="registro-fecha">Miembro desde: <span id="fechaRegistro">--</span></p>
                    </div>
                </div>
            </div>

            <!-- Opciones de perfil -->
            <div class="perfil-options">
                
                <!-- Editar informaci√≥n personal -->
                <div class="option-card">
                    <div class="option-icon">‚úèÔ∏è</div>
                    <div class="option-content">
                        <h3>Editar Informaci√≥n Personal</h3>
                        <p>Cambia tu nombre, email y otros datos</p>
                        <button id="editarInfoBtn" class="btn-primary">Editar Datos</button>
                    </div>
                </div>

                <!-- Cambiar contrase√±a -->
                <div class="option-card">
                    <div class="option-icon">üîê</div>
                    <div class="option-content">
                        <h3>Cambiar Contrase√±a</h3>
                        <p>Actualiza tu contrase√±a de acceso</p>
                        <button id="cambiarPasswordBtn" class="btn-primary">Cambiar Contrase√±a</button>
                    </div>
                </div>

                <!-- Eliminar cuenta (peligroso) -->
                <div class="option-card danger-card">
                    <div class="option-icon">‚ö†Ô∏è</div>
                    <div class="option-content">
                        <h3>Zona Peligrosa</h3>
                        <p>Eliminar permanentemente tu cuenta y todos tus datos</p>
                        <button id="eliminarCuentaBtn" class="btn-danger">Eliminar Mi Cuenta</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para editar informaci√≥n -->
    <div id="modalEditarInfo" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Editar Informaci√≥n Personal</h3>
                <button class="modal-close" id="closeEditModal">&times;</button>
            </div>
            <form id="editarInfoForm">
                <div class="form-group">
                    <label for="editNombre">Nombre completo:</label>
                    <input type="text" id="editNombre" required>
                </div>
                <div class="form-group">
                    <label for="editEmail">Email:</label>
                    <input type="email" id="editEmail" required>
                </div>
                <div class="modal-actions">
                    <button type="submit" class="btn-primary">Guardar Cambios</button>
                    <button type="button" id="cancelEditBtn" class="btn-secondary">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal para cambiar contrase√±a -->
    <div id="modalCambiarPassword" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Cambiar Contrase√±a</h3>
                <button class="modal-close" id="closePasswordModal">&times;</button>
            </div>
            <form id="cambiarPasswordForm">
                <div class="form-group">
                    <label for="currentPassword">Contrase√±a actual:</label>
                    <input type="password" id="currentPassword" required>
                </div>
                <div class="form-group">
                    <label for="newPassword">Nueva contrase√±a:</label>
                    <input type="password" id="newPassword" minlength="6" required>
                </div>
                <div class="form-group">
                    <label for="confirmPassword">Confirmar nueva contrase√±a:</label>
                    <input type="password" id="confirmPassword" minlength="6" required>
                </div>
                <div class="modal-actions">
                    <button type="submit" class="btn-primary">Cambiar Contrase√±a</button>
                    <button type="button" id="cancelPasswordBtn" class="btn-secondary">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de confirmaci√≥n para eliminar cuenta -->
    <div id="modalEliminarCuenta" class="modal">
        <div class="modal-content danger-modal">
            <div class="modal-header">
                <h3>‚ö†Ô∏è Eliminar Cuenta Permanentemente</h3>
            </div>
            <div class="warning-content">
                <p><strong>¬°ATENCI√ìN!</strong> Esta acci√≥n no se puede deshacer.</p>
                <p>Se eliminar√° permanentemente:</p>
                <ul>
                    <li>Tu cuenta de usuario</li>
                    <li>Todos tus tests y resultados</li>
                    <li>Tus apuntes y progreso</li>
                    <li>Todas tus preguntas creadas</li>
                </ul>
                <div class="form-group">
                    <label for="confirmDeleteText">Para confirmar, escribe <strong>"ELIMINAR"</strong>:</label>
                    <input type="text" id="confirmDeleteText" placeholder="Escribe ELIMINAR">
                </div>
                <div class="form-group">
                    <label for="deletePassword">Tu contrase√±a actual:</label>
                    <input type="password" id="deletePassword" placeholder="Contrase√±a actual" required>
                </div>
            </div>
            <div class="modal-actions">
                <button id="confirmarEliminarBtn" class="btn-danger" disabled>Eliminar Cuenta Definitivamente</button>
                <button id="cancelDeleteBtn" class="btn-secondary">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Mensaje de estado -->
    <div id="message" class="message" style="display: none;"></div>

    <script type="module" src="js/perfil.js"></script>
</body>
</html>