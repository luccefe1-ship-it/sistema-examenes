
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Perfil - Plataforma Ex√°menes</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/perfil.css">
    <style>
#backBtn {
    background: #6c757d !important;
    color: white !important;
    padding: 8px 16px !important;
    border: none !important;
    border-radius: 5px !important;
    font-size: 14px !important;
}

/* FONDOS DIN√ÅMICOS SINCRONIZADOS CON HOMEPAGE */
body {
    transition: background 1s ease;
    /* FONDO CELESTE CLARO POR DEFECTO PARA EL D√çA */
    background: 
        radial-gradient(ellipse at top, rgba(135,206,250,0.3) 0%, rgba(173,216,230,0.4) 50%, rgba(176,196,222,0.5) 100%),
        radial-gradient(circle at 20% 80%, rgba(200,230,255,0.15) 0%, transparent 60%),
        radial-gradient(circle at 80% 20%, rgba(200,230,255,0.15) 0%, transparent 60%),
        radial-gradient(circle at 40% 40%, rgba(220,240,255,0.12) 0%, transparent 60%),
        radial-gradient(circle at 60% 70%, rgba(220,240,255,0.14) 0%, transparent 60%),
        radial-gradient(circle at 10% 10%, rgba(200,230,255,0.12) 0%, transparent 60%),
        radial-gradient(circle at 90% 90%, rgba(200,230,255,0.10) 0%, transparent 60%),
        radial-gradient(circle at 30% 20%, rgba(173,216,230,0.06) 0%, transparent 50%),
        radial-gradient(circle at 70% 80%, rgba(176,196,222,0.06) 0%, transparent 50%);
}

/* FONDO D√çA (6:00 - 18:00) - Celeste muy clarito */
body.dia {
    background: 
        radial-gradient(ellipse at top, rgba(135,206,250,0.3) 0%, rgba(173,216,230,0.4) 50%, rgba(176,196,222,0.5) 100%),
        radial-gradient(circle at 20% 80%, rgba(200,230,255,0.15) 0%, transparent 60%),
        radial-gradient(circle at 80% 20%, rgba(200,230,255,0.15) 0%, transparent 60%),
        radial-gradient(circle at 40% 40%, rgba(220,240,255,0.12) 0%, transparent 60%),
        radial-gradient(circle at 60% 70%, rgba(220,240,255,0.14) 0%, transparent 60%),
        radial-gradient(circle at 10% 10%, rgba(200,230,255,0.12) 0%, transparent 60%),
        radial-gradient(circle at 90% 90%, rgba(200,230,255,0.10) 0%, transparent 60%),
        radial-gradient(circle at 30% 20%, rgba(173,216,230,0.06) 0%, transparent 50%),
        radial-gradient(circle at 70% 80%, rgba(176,196,222,0.06) 0%, transparent 50%);
}

/* FONDO TARDE (18:00 - 21:00) - Gradiente naranja abajo izquierda a azul oscuro arriba derecha */
body.tarde {
    background: 
        linear-gradient(45deg, rgba(255,120,40,0.6) 0%, rgba(255,140,60,0.5) 20%, rgba(120,150,200,0.4) 60%, rgba(40,60,120,0.8) 100%),
        radial-gradient(circle at 20% 80%, rgba(255,200,150,0.10) 0%, transparent 60%),
        radial-gradient(circle at 80% 20%, rgba(100,120,180,0.08) 0%, transparent 60%),
        radial-gradient(circle at 40% 40%, rgba(255,150,100,0.06) 0%, transparent 60%),
        radial-gradient(circle at 60% 70%, rgba(80,100,160,0.07) 0%, transparent 60%),
        radial-gradient(circle at 10% 10%, rgba(255,140,90,0.08) 0%, transparent 60%),
        radial-gradient(circle at 90% 90%, rgba(60,80,140,0.06) 0%, transparent 60%),
        radial-gradient(circle at 30% 20%, rgba(220,140,80,0.04) 0%, transparent 50%),
        radial-gradient(circle at 70% 80%, rgba(80,100,160,0.04) 0%, transparent 50%);
}

/* FONDO NOCHE (21:00 - 6:00) - Muy oscuro */
body.noche {
    background: 
        radial-gradient(ellipse at top, rgba(25,25,60,0.8) 0%, rgba(30,30,70,0.9) 50%, rgba(15,15,40,0.95) 100%),
        radial-gradient(circle at 20% 80%, rgba(100,100,150,0.06) 0%, transparent 60%),
        radial-gradient(circle at 80% 20%, rgba(100,100,150,0.06) 0%, transparent 60%),
        radial-gradient(circle at 40% 40%, rgba(100,100,150,0.04) 0%, transparent 60%),
        radial-gradient(circle at 60% 70%, rgba(100,100,150,0.05) 0%, transparent 60%),
        radial-gradient(circle at 10% 10%, rgba(100,100,150,0.04) 0%, transparent 60%),
        radial-gradient(circle at 90% 90%, rgba(100,100,150,0.03) 0%, transparent 60%),
        radial-gradient(circle at 30% 20%, rgba(50,50,100,0.02) 0%, transparent 50%),
        radial-gradient(circle at 70% 80%, rgba(60,60,120,0.02) 0%, transparent 50%);
}
</style>
</head>
<body>
    <!-- Header -->
    <nav class="navbar">
        <div class="nav-content">
            <h1>Mi Perfil de Usuario</h1>
            <div class="nav-actions">
                <span id="userName">Cargando...</span>
                <button id="backBtn">‚Üê Volver</button>
                <button id="logoutBtn">Cerrar Sesi√≥n</button>
            </div>
        </div>
    </nav>

    <!-- Contenido principal -->
    <div class="perfil-container">
        <div class="perfil-content">
            
            <!-- Informaci√≥n del usuario -->
            <div class="perfil-card">
                <div class="perfil-header">
                    <div class="perfil-avatar">
                        <span id="userInitials">U</span>
                    </div>
                    <div class="perfil-info">
                        <h2 id="userDisplayName">Nombre del Usuario</h2>
                        <p id="userEmail">email@ejemplo.com</p>
                        <p class="registro-fecha">Miembro desde: <span id="fechaRegistro">--</span></p>
                    </div>
                </div>
            </div>

            <!-- Opciones de perfil -->
            <div class="perfil-options">
                
                <!-- Editar informaci√≥n personal -->
                <div class="option-card">
                    <div class="option-icon">‚úèÔ∏è</div>
                    <div class="option-content">
                        <h3>Editar Informaci√≥n Personal</h3>
                        <p>Cambia tu nombre, email y otros datos</p>
                        <button id="editarInfoBtn" class="btn-primary">Editar Datos</button>
                    </div>
                </div>

                <!-- Cambiar contrase√±a -->
                <div class="option-card">
                    <div class="option-icon">üîê</div>
                    <div class="option-content">
                        <h3>Cambiar Contrase√±a</h3>
                        <p>Actualiza tu contrase√±a de acceso</p>
                        <button id="cambiarPasswordBtn" class="btn-primary">Cambiar Contrase√±a</button>
                    </div>
                </div>

                <!-- Eliminar cuenta (peligroso) -->
                <div class="option-card danger-card">
                    <div class="option-icon">‚ö†Ô∏è</div>
                    <div class="option-content">
                        <h3>Zona Peligrosa</h3>
                        <p>Eliminar permanentemente tu cuenta y todos tus datos</p>
                        <button id="eliminarCuentaBtn" class="btn-danger">Eliminar Mi Cuenta</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para editar informaci√≥n -->
    <div id="modalEditarInfo" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Editar Informaci√≥n Personal</h3>
                <button class="modal-close" id="closeEditModal">&times;</button>
            </div>
            <form id="editarInfoForm">
                <div class="form-group">
                    <label for="editNombre">Nombre completo:</label>
                    <input type="text" id="editNombre" required>
                </div>
                <div class="form-group">
                    <label for="editEmail">Email:</label>
                    <input type="email" id="editEmail" required>
                </div>
                <div class="modal-actions">
                    <button type="submit" class="btn-primary">Guardar Cambios</button>
                    <button type="button" id="cancelEditBtn" class="btn-secondary">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal para cambiar contrase√±a -->
    <div id="modalCambiarPassword" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Cambiar Contrase√±a</h3>
                <button class="modal-close" id="closePasswordModal">&times;</button>
            </div>
            <form id="cambiarPasswordForm">
                <div class="form-group">
                    <label for="currentPassword">Contrase√±a actual:</label>
                    <input type="password" id="currentPassword" required>
                </div>
                <div class="form-group">
                    <label for="newPassword">Nueva contrase√±a:</label>
                    <input type="password" id="newPassword" minlength="6" required>
                </div>
                <div class="form-group">
                    <label for="confirmPassword">Confirmar nueva contrase√±a:</label>
                    <input type="password" id="confirmPassword" minlength="6" required>
                </div>
                <div class="modal-actions">
                    <button type="submit" class="btn-primary">Cambiar Contrase√±a</button>
                    <button type="button" id="cancelPasswordBtn" class="btn-secondary">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de confirmaci√≥n para eliminar cuenta -->
    <div id="modalEliminarCuenta" class="modal">
        <div class="modal-content danger-modal">
            <div class="modal-header">
                <h3>‚ö†Ô∏è Eliminar Cuenta Permanentemente</h3>
            </div>
            <div class="warning-content">
                <p><strong>¬°ATENCI√ìN!</strong> Esta acci√≥n no se puede deshacer.</p>
                <p>Se eliminar√° permanentemente:</p>
                <ul>
                    <li>Tu cuenta de usuario</li>
                    <li>Todos tus tests y resultados</li>
                    <li>Tus apuntes y progreso</li>
                    <li>Todas tus preguntas creadas</li>
                </ul>
                <div class="form-group">
                    <label for="confirmDeleteText">Para confirmar, escribe <strong>"ELIMINAR"</strong>:</label>
                    <input type="text" id="confirmDeleteText" placeholder="Escribe ELIMINAR">
                </div>
                <div class="form-group">
                    <label for="deletePassword">Tu contrase√±a actual:</label>
                    <input type="password" id="deletePassword" placeholder="Contrase√±a actual" required>
                </div>
            </div>
            <div class="modal-actions">
                <button id="confirmarEliminarBtn" class="btn-danger" disabled>Eliminar Cuenta Definitivamente</button>
                <button id="cancelDeleteBtn" class="btn-secondary">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Mensaje de estado -->
    <div id="message" class="message" style="display: none;"></div>

    <script type="module" src="js/perfil.js"></script>
    
    <script>
    // Funci√≥n para actualizar el fondo seg√∫n la hora
    function actualizarFondoHora() {
        const ahora = new Date();
        const hora = ahora.getHours();
        const body = document.body;
        
        // Limpiar clases anteriores
        body.classList.remove('dia', 'tarde', 'noche');
        
        if (hora >= 6 && hora < 18) {
            // D√≠a (6:00 - 18:00) - Fondo claro
            body.classList.add('dia');
        } else if (hora >= 18 && hora < 21) {
            // Tarde (18:00 - 21:00) - Fondo actual
            body.classList.add('tarde');
        } else {
            // Noche (21:00 - 6:00) - Fondo oscuro
            body.classList.add('noche');
        }
    }

    // Aplicar fondo al cargar
    document.addEventListener('DOMContentLoaded', () => {
        actualizarFondoHora();
    });

    // Actualizar cada hora
    setInterval(actualizarFondoHora, 60000 * 60);
    </script>
</body>
</html>
