<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Progreso Diario</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/progreso-diario.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-content">
            <h1>Plataforma ExÃ¡menes de Justicia</h1>
            <div class="nav-actions">
                <span id="userName">Cargando...</span>
                <button class="btn-volver" onclick="window.location.href='homepage.html'">â† Volver</button>
                <button id="logoutBtn">Cerrar SesiÃ³n</button>
            </div>
        </div>
    </nav>

    <div class="progreso-container">
        <!-- Resumen general -->
        <div class="resumen-general">
            <h2>ğŸ“Š Mi Progreso General</h2>
            <div class="metricas-grid">
               <div class="metrica">
    <div class="metrica-icono">ğŸ“š</div>
    <div class="metrica-info">
        <div class="metrica-valor" id="paginasTotales">0</div>
        <div class="metrica-label">Hojas leÃ­das</div>
    </div>
</div>
<div class="metrica">
    <div class="metrica-icono">ğŸ“–</div>
    <div class="metrica-info">
        <div class="metrica-valor" id="paginasRestantes">0</div>
        <div class="metrica-label">Hojas restantes</div>
    </div>
</div>
                <div class="metrica">
                    <div class="metrica-icono">âœ…</div>
                    <div class="metrica-info">
                        <div class="metrica-valor" id="testsTotales">0/0</div>
                        <div class="metrica-label">Tests realizados</div>
                    </div>
                </div>
                <div class="metrica">
                    <div class="metrica-icono">ğŸ¯</div>
                    <div class="metrica-info">
                        <div class="metrica-valor" id="porcentajeCompleto">0%</div>
                        <div class="metrica-label">Completado</div>
                    </div>
                </div>
                <div class="metrica">
                    <div class="metrica-icono">ğŸ“…</div>
                    <div class="metrica-info">
                        <div class="metrica-valor" id="fechaObjetivo">-</div>
                        <div class="metrica-label" id="diasRestantes">0 dÃ­as restantes</div>
                    </div>
                </div>
            </div>
            
            <div class="barra-progreso-general">
                <div id="barraProgresoGeneral" class="barra-fill"></div>
            </div>
        </div>

        <!-- Mensaje de tests realizados hoy -->
        <div id="mensajeTestsHoy" style="display: none; margin: 20px 0; padding: 15px; background: #d4edda; border-left: 4px solid #28a745; border-radius: 8px; font-size: 16px; font-weight: 600; color: #155724;"></div>

        <!-- Registrar avance de hoy -->
        <div class="registro-hoy">
            <div id="mensajeTestsHoy" style="display: none; margin-bottom: 20px; padding: 15px; background: #e8f5e9; border-left: 4px solid #4caf50; border-radius: 8px; font-size: 16px; font-weight: 600; color: #2e7d32;"></div>
            <h2>ğŸ“ Registrar avance de hoy</h2>
            <form id="formRegistro" class="form-registro">
                <div class="form-grupo">
                    <label>Tema en el que estÃ¡s trabajando:</label>
                    <select id="temaActual" required>
                        <option value="">Selecciona un tema...</option>
                    </select>
                </div>
                
                <div class="form-row">
    <div class="form-grupo">
        <label>ğŸ“„ Hojas leÃ­das hoy:</label>
        <input type="number" id="paginasHoy" min="0" required placeholder="0" />
    </div>
    
    <div class="form-grupo">
        <label>ğŸ“– Desde pÃ¡gina:</label>
        <input type="number" id="paginaDesde" min="1" placeholder="Ej: 1" />
    </div>
    
    <div class="form-grupo">
        <label>ğŸ“– Hasta pÃ¡gina:</label>
        <input type="number" id="paginaHasta" min="1" placeholder="Ej: 5" />
    </div>
</div>

<div class="form-row">
    <div class="form-grupo">
        <label>âœ… Tests realizados hoy:</label>
        <input type="number" id="testsHoy" min="0" required placeholder="0" />
        <small style="display: block; margin-top: 5px; color: #666; font-style: italic;">Solo para tests realizados fuera de la plataforma</small>
    </div>
</div>
                
                <button type="submit" class="btn-registrar">ğŸ’¾ Guardar Progreso</button>
                <button type="button" class="btn-ver-registro" onclick="window.location.href='registro-diario.html'">ğŸ“‹ Ver registro Diario</button>
            </form>
        </div>
<!-- Botones de gestiÃ³n -->
        <div class="botones-gestion">
            <button onclick="abrirModalModificarPlanning()" class="btn-gestion btn-primary">
                âš™ï¸ Modificar Planning
            </button>
            <button onclick="eliminarUltimoRegistro()" class="btn-gestion btn-warning">
                ğŸ”„ Eliminar Ãšltimo Registro
            </button>
            <button onclick="eliminarPlanning()" class="btn-gestion btn-danger-dark">
                âŒ Eliminar Planning Completo
            </button>
        </div>
        <!-- Progreso por temas -->
        <div class="progreso-temas">
            <h2>ğŸ“š Progreso por temas</h2>
            <div id="listaTemas" class="lista-temas-progreso"></div>
        </div>
    </div>

    <script type="module" src="js/progreso-diario.js"></script>

    <!-- Modal Modificar Planning -->
    <div id="modalModificarPlanning" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 9999; justify-content: center; align-items: center;">
        <div style="background: white; padding: 40px; border-radius: 16px; max-width: 500px; width: 90%; box-shadow: 0 8px 32px rgba(0,0,0,0.3);">
            <h2 style="margin: 0 0 25px; color: #333; font-size: 24px;">âš™ï¸ Modificar Planning</h2>
            
            <div style="margin-bottom: 20px;">
                <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #555;">ğŸ“… Fecha objetivo:</label>
                <input type="date" id="inputNuevaFecha" style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px;" />
            </div>
            
            <div style="margin-bottom: 30px;">
                <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #555;">ğŸ“ Tests por dÃ­a:</label>
                <input type="number" id="inputNuevosTests" min="0" style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px;" />
            </div>
            
            <div style="display: flex; gap: 12px;">
                <button onclick="guardarModificacionPlanning()" style="flex: 1; padding: 14px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer;">Guardar Cambios</button>
                <button onclick="cerrarModalModificarPlanning()" style="flex: 1; padding: 14px; background: #e5e7eb; color: #333; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer;">Cancelar</button>
            </div>
        </div>
    </div>
</body>
</html>
