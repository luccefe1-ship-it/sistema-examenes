
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Progreso - Plataforma Ex√°menes</title>
    
    <!-- SOLO EL CSS DE PROGRESO, SIN EL STYLE.CSS PROBLEM√ÅTICO -->
    <link rel="stylesheet" href="css/Progreso.css">
    
    <style>
        /* CSS M√çNIMO NECESARIO PARA QUE FUNCIONE */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            overflow-y: auto;
            font-family: Arial, sans-serif;
            scroll-padding-top: 80px !important; /* ESTO EVITA QUE EL SCROLL ATRAVIESE EL HEADER */
        }

        body {
            background: radial-gradient(ellipse at top, rgba(45,75,140,0.6) 0%, rgba(60,95,170,0.7) 50%, rgba(40,45,80,0.8) 100%);
            min-height: 100vh;
            padding-top: 80px;
        }

        /* NAVBAR B√ÅSICO */
        .navbar {
            background: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            height: 60px;
        }

        .nav-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 30px;
            height: 100%;
        }

        .nav-content h1 {
            color: #333;
            font-size: 20px;
        }

        .nav-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .nav-actions span {
            color: #666;
        }

        #logoutBtn, #backBtn {
            padding: 8px 16px;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        #logoutBtn {
            background: #e53e3e;
        }

        #backBtn {
            background: #6c757d;
        }

        /* CONTENEDOR SIN MARGIN-TOP */
        .container-progreso {
            margin-top: 0 !important;
        }
    </style>
</head>
<body>
    <!-- Header principal -->
    <nav class="navbar">
        <div class="nav-content">
            <h1>Plataforma Ex√°menes de Justicia</h1>
            <div class="nav-actions">
                <span id="userName">Cargando...</span>
                <button id="backBtn">‚Üê Volver</button>
                <button id="logoutBtn">Cerrar Sesi√≥n</button>
            </div>
        </div>
    </nav>

    <!-- Contenido principal -->
    <div class="container-progreso">
        <!-- Header del Progreso -->
        <div class="progreso-header">
            <div class="progreso-title">
                <h1>üìä Progreso de Estudio</h1>
                <p>Seguimiento de tu progreso por temas y vueltas</p>
            </div>
        </div>

        <!-- Botones de gesti√≥n -->
        <div class="progreso-controls">
            <button id="personalizarTemasBtn" class="btn-personalizar">
                ‚öôÔ∏è Personalizar Temas
            </button>
        </div>

        <!-- Tabla de progreso -->
        <div class="tabla-progreso">
            <!-- Header de la tabla -->
            <div class="tabla-header">
                <div class="col-tema">Tema</div>
                <div class="col-memorizado">Memorizado</div>
                <div class="col-tests">Test Realizados</div>
                <div class="col-vuelta">Vuelta</div>
                <div class="col-progreso">Progreso</div>
                <div class="col-acciones">Acciones</div>
            </div>

            <!-- Contenido de la tabla -->
            <div id="tablaProgresoContent" class="tabla-content">
                <!-- Los temas se cargar√°n din√°micamente aqu√≠ -->
            </div>

            <!-- Fila de progreso general -->
            <div class="fila-general">
                <div class="col-tema">
                    <strong>üìö PROGRESO GENERAL</strong>
                </div>
                <div class="col-memorizado">
                    <span id="progresoGeneralMemorizado">0/0</span>
                </div>
                <div class="col-tests">
                    <span id="progresoGeneralTests">0</span>
                </div>
                <div class="col-vuelta">
                    <span id="progresoGeneralVuelta">Primera</span>
                </div>
                <div class="col-progreso">
                    <div class="barra-progreso">
                        <div id="barraProgresoGeneral" class="barra-fill vuelta-1"></div>
                    </div>
                    <span id="porcentajeProgresoGeneral">0%</span>
                </div>
                <div class="col-acciones">
                    <span>--</span>
                </div>
            </div>
        </div>

        <!-- Bot√≥n Ver Estad√≠sticas (reemplaza leyenda-container) -->
<div class="estadisticas-container">
    <button id="verEstadisticasBtn" class="btn-ver-estadisticas">
        üìä Ver Estad√≠sticas Detalladas
    </button>
</div>

<!-- Modal de Estad√≠sticas -->
<div id="modalEstadisticas" class="modal">
    <div class="modal-content modal-estadisticas">
        <div class="modal-header">
            <h3>üìä Estad√≠sticas Detalladas por Tema</h3>
            <button class="modal-close" onclick="cerrarModalEstadisticas()">√ó</button>
        </div>
        <div class="grafica-container">
            <canvas id="graficaEstadisticas" width="800" height="400"></canvas>
        </div>
        <div class="estadisticas-info">
    <p><strong>F√≥rmula de ponderaci√≥n:</strong> (P√°ginas Le√≠das √ó 0.4) + (Vueltas Completadas √ó 0.4) + (Tests Realizados √ó 0.2)</p>
</div>
<div class="detalles-temas">
    <h4>Detalles por Tema:</h4>
    <div id="leyendaDetalles" class="leyenda-detalles">
        <!-- Los detalles se generar√°n din√°micamente -->
    </div>
</div>
        <div class="modal-actions">
            <button onclick="cerrarModalEstadisticas()" class="btn-secondary">Cerrar</button>
        </div>
    </div>
</div>

        <!-- Bot√≥n volver -->
        <div class="volver-container">
            <button class="btn-volver" onclick="window.location.href='homepage.html'">
                ‚Üê Volver al Men√∫ Principal
            </button>
        </div>
    </div>

    <!-- Modal Personalizar Temas -->
    <div id="modalPersonalizarTemas" class="modal">
        <div class="modal-content">
            <h3>Personalizar P√°ginas por Tema</h3>
            <div id="listaTemasPersonalizar" class="lista-temas-personalizar">
                <!-- Los temas se cargar√°n din√°micamente -->
            </div>
            <div class="modal-actions">
                <button id="guardarPersonalizacion" class="btn-primary">Guardar Cambios</button>
                <button id="restaurarDefecto" class="btn-restaurar">Restaurar Valores por Defecto</button>
                <button id="cancelarPersonalizacion" class="btn-secondary">Cancelar</button>
            </div>
        </div>
    </div>

    <script type="module" src="js/Progreso.js"></script>
</body>
</html>
